<div class="view">
    <div class="header">
        <div class="header-left">
            <div class="header-title" (click)="goToHome()">Around Us</div>
        </div>
        <!--If login already-->
        <div *ngIf="isLogin == true" class="header-right">
            <div class="header-welcome">Welcome, {{username}}</div>
            <div class="header-button" (click)="clickLogout()">LOG OUT</div>
        </div>
        <!--If not login-->
        <div *ngIf="isLogin == false" class="header-right">
            <div class="header-button" (click)="goToLogin()">LOG IN</div>
            <div class="header-button" (click)="goToSignup()">REGISTER</div>
        </div>

    </div>
    <div class="main">
        <agm-map class="google-map"
                 [mapTypeId]="'roadmap'"
                 [latitude]="centerLat"
                 [longitude]="centerLng"
                 [minZoom]="0"
                 [zoom] = "13"
                 (mapClick)="clickMap($event)"
                 (centerChange)="changeCenter($event)"
                 [clickableIcons]="false"
                 [styles]="mapStyle"
                 [usePanning]="true"
        >
            <div *ngFor="let event of events">
                <div *ngIf="event.mood == 'happy'">
                    <agm-marker
                            [latitude]="event.latitude"
                            [longitude]="event.longitude"
                            [iconUrl]="{
                    url:'assets/images/happyMarker.png',
                    scaledSize: {
                        height: 30,
                        width: 30
                    }
                }"
                            [title]="event.title"
                            (markerClick)= "clickMarker(event.id)"
                    ></agm-marker>
                </div>
                <div *ngIf="event.mood == 'sad'">
                    <agm-marker
                            [latitude]="event.latitude"
                            [longitude]="event.longitude"
                            [iconUrl]="{
                    url:'assets/images/sadMarker.png',
                    scaledSize: {
                        height: 30,
                        width: 30
                    }
                }"
                            [title]="event.title"
                            (markerClick)= "clickMarker(event.id)"
                    ></agm-marker>
                </div>
                <div *ngIf="event.mood == 'angry'">
                    <agm-marker
                            [latitude]="event.latitude"
                            [longitude]="event.longitude"
                            [iconUrl]="{
                    url:'assets/images/angryMarker.png',
                    scaledSize: {
                        height: 30,
                        width: 30
                    }
                }"
                            [title]="event.title"
                            (markerClick)= "clickMarker(event.id)"
                    ></agm-marker>
                </div>
                <div *ngIf="event.mood == 'love'">
                    <agm-marker
                            [latitude]="event.latitude"
                            [longitude]="event.longitude"
                            [iconUrl]="{
                    url:'assets/images/loveMarker.png',
                    scaledSize: {
                        height: 30,
                        width: 30
                    }
                }"
                            [title]="event.title"
                            (markerClick)= "clickMarker(event.id)"
                    ></agm-marker>
                </div>
                <div *ngIf="event.mood == 'heartbroken'">
                    <agm-marker
                            [latitude]="event.latitude"
                            [longitude]="event.longitude"
                            [iconUrl]="{
                    url:'assets/images/heartbrokenMarker.png',
                    scaledSize: {
                        height: 30,
                        width: 30
                    }
                }"
                            [title]="event.title"
                            (markerClick)= "clickMarker(event.id)"
                    ></agm-marker>
                </div>
            </div>
            <!--Clicked Marker-->
            <div *ngIf="mapClicked">
                <agm-marker
                        [latitude]="clickedLat"
                        [longitude]="clickedLng"
                        [title]="'Your Spot'"
                ></agm-marker>
            </div>

        </agm-map>

        <div *ngIf="currentEvent">
            <app-event-detail [event]="currentEvent" (close)="clickCloseEventDetail()"></app-event-detail>
        </div>

        <div *ngIf="mapClicked">
            <app-event-post [latitude]="clickedLat" [longitude]="clickedLng"  [location]="clickedLocation" (close)="clickCloseEventPost()"></app-event-post>
        </div>
    </div>
</div>